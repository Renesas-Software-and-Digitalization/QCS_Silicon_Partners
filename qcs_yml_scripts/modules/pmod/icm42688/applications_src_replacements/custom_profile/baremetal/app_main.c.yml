# qe_gen\ble\app_main.c replacements
  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@INCLUDES'
    replace: |


  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@FN_DECLARATION'
    replace: |
          static void handle_read_temperature(uint16_t id, uint8_t const * const data);
          static void handle_read_accX(uint16_t id, uint8_t const * const data);
          static void handle_read_accY(uint16_t id, uint8_t const * const data);
          static void handle_read_accZ(uint16_t id, uint8_t const * const data);
          static void handle_read_gyroX(uint16_t id, uint8_t const * const data);
          static void handle_read_gyroY(uint16_t id, uint8_t const * const data);
          static void handle_read_gyroZ(uint16_t id, uint8_t const * const data);

  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@GLOBAL_VARIABLES'
    replace: |
          static const qc_svc_request_handlers_t qc_sv_req_handlers[] =
          {
                /* Object ID   Read Handler                  Write Handler */
                { 0x0000,      handle_read_gui_req,          NULL                 },
                { 0x0100,      NULL,                         handle_write_led     },
                { 0x0201,      handle_read_temperature,      NULL                 },
                { 0x0202,      handle_read_accX,             NULL                 },
                { 0x0203,      handle_read_accY,             NULL                 },
                { 0x0204,      handle_read_accZ,             NULL                 },
                { 0x0205,      handle_read_gyroX,            NULL                 },
                { 0x0206,      handle_read_gyroY,            NULL                 },
                { 0x0207,      handle_read_gyroZ,            NULL                 },
                { 0x0301,      handle_read_version,          NULL                 },
                { 0xFFFF,      NULL,                         NULL                 }
          };
          static float temperature;
          static float accX;
          static float accY;
          static float accZ;
          static float gyroX;
          static float gyroY;
          static float gyroZ;
  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@MAIN_INITIALIZATION'
    replace: |
          float icm42688_temp, icm42688_acc[3], icm42688_gyro[3];
          g_icm42688_quick_setup();

  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@MAIN_LOOP'
    replace: |
          g_icm42688_sensor0_read(&icm42688_temp, icm42688_acc, icm42688_gyro);
          temperature = icm42688_temp; 
          accX        = icm42688_acc[0];
          accY        = icm42688_acc[1];
          accZ        = icm42688_acc[2];
          gyroX       = icm42688_gyro[0];
          gyroY       = icm42688_gyro[1];
          gyroZ       = icm42688_gyro[2];

  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@FN_IMPLEMENTATION'
    replace: |
          static void handle_read_temperature(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(temperature), (uint8_t *)&temperature);
          }

          static void handle_read_accX(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(accX), (uint8_t *)&accX);
          }

          static void handle_read_accY(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(accY), (uint8_t *)&accY);
          }

          static void handle_read_accZ(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(accZ), (uint8_t *)&accZ);
          }

          static void handle_read_gyroX(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(gyroX), (uint8_t *)&gyroX);
          }

          static void handle_read_gyroY(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(gyroY), (uint8_t *)&gyroY);
          }

          static void handle_read_gyroZ(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(gyroZ), (uint8_t *)&gyroZ);
          }