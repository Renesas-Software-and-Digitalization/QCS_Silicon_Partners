# qe_gen\ble\app_main.c replacements
  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@INCLUDES'
    replace: |


  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@FN_DECLARATION'
    replace: |
          static void handle_read_temperature(uint16_t id, uint8_t const * const data);
          static void handle_read_uva(uint16_t id, uint8_t const * const data);
          static void handle_read_uvb(uint16_t id, uint8_t const * const data);
          static void handle_read_uvc(uint16_t id, uint8_t const * const data);

  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@GLOBAL_VARIABLES'
    replace: |
          static const qc_svc_request_handlers_t qc_sv_req_handlers[] =
          {
                /* Object ID   Read Handler                  Write Handler */
                { 0x0000,      handle_read_gui_req,          NULL                        },
                { 0x0100,      NULL,                         handle_write_led            },
                { 0x0201,      handle_read_temperature,      NULL                        },
                { 0x0202,      handle_read_uva,              NULL                        },
                { 0x0203,      handle_read_uvb,              NULL                        },
                { 0x0204,      handle_read_uvc,              NULL                        },
                { 0x0301,      handle_read_version,          NULL                        },
                { 0xFFFF,      NULL,                         NULL                        }
          };
          static float temperature;
          static float uva;
          static float uvb;
          static float uvc;

  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@MAIN_INITIALIZATION'
    replace: |

  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@MAIN_LOOP'
    replace: |
          float sens_data[SENSOR_DATA_COUNT] = {0};
          if (pdTRUE == xQueueReceive(g_sensor_queue, &sens_data, 0))
          {
            temperature = sens_data[0];
            uva         = sens_data[1];
            uvb         = sens_data[2];
            uvc         = sens_data[3];
          }
        
  - op: replace_in_file
    src: 'src/qe_gen/ble/app_main.c'
    match: '@FN_IMPLEMENTATION'
    replace: |
          static void handle_read_temperature(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(temperature), (uint8_t *)&temperature);
          }

          static void handle_read_uva(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(uva), (uint8_t *)&uva);
          }

          static void handle_read_uvb(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(uvb), (uint8_t *)&uvb);
          }

          static void handle_read_uvc(uint16_t id, uint8_t const * const data)
          {
              FSP_PARAMETER_NOT_USED(data);
              printf("sending id: 0x%04x\n", id);
              qc_svc_send_read_response(QC_SVC_SUCCESS, id, sizeof(uvc), (uint8_t *)&uvc);
          }